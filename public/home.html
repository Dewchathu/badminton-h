<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Firebase Data Display</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="home.css" />

    <!-- Add dark mode styles -->
    <style>
      body {
        background-color: #2c3e50;
        color: #ecf0f1;
        font-family: "Arial", sans-serif;
        background: url(./assets/muktasim-azlan-rjWfNR_AC5g-unsplash.jpg);
        background-size: cover;
        background-repeat: no-repeat;
      }

      h1 {
        color: #3498db;
      }

      .timestamp {
        color: #ecf0f1;
        padding: 20px;
        margin-bottom: 10px;
        border: #ecf0f1 solid 1px;
        border-radius: 10px;
        max-width: 300px;
        margin-left: auto;
        margin-right: auto;
      }
    </style>
  </head>
  <body>
    <div class="row">
      <div class="col-3">
        <div class="box1 left">
          <div class="form1">
            <h2>Details</h2>
            <form2>
              <div class="inputbox">
                <input type="text" value="" id="Fname" required />
                <span>First Name</span>
              </div>
              <div class="inputbox">
                <input type="text" value="" id="Lname" required />
                <span>Last Name Name</span>
              </div>
              <div class="inputbox">
                <input type="email" value="" id="email" required />
                <span>E-mail</span>
              </div>
              <div class="inputbox">
                <input type="number" value="" id="phone" required />
                <span>Phone Number</span>
              </div>
              <div class="inputbox">
                <input type="text" value="" id="Uni" required />
                <span>University</span>
              </div>
              <div class="inputbox">
                <input type="number" value="" id="Inum" required />
                <span>Index Number</span>
              </div>
              <div classname="btn">
                <input type="submit" value="Start" class="sub" id="AddBtn" />
                <input type="submit" value="Stop" class="sub" id="Retrieve" />
                <input type="submit" value="Reset" class="sub" id="Update" />
              </div>
            </form2>
          </div>
        </div>
      </div>
      <div class="col-1"></div>
      <div class="col-8">
        <img
          src="assets/mudassir-ali-Ygy6aPp6980-unsplash.jpg"
          class="img-fluid image"
          alt="..."
        />

        <div class="row">
          <div class="col">
            <div class="row">
              <div id="time-difference-1-7" class="timestamp"></div>
            </div>
            <div class="row"></div>
            <div class="row">
              <div id="time-difference-7-2" class="timestamp"></div>
            </div>
          </div>
          <div class="col">
            <div class="row">
              <div id="time-difference-7-3" class="timestamp"></div>
            </div>
            <div class="row">
              <div id="timestamp-display-7" class="timestamp"></div>
            </div>
            <div class="row">
              <div id="time-difference-7-4" class="timestamp"></div>
            </div>
          </div>
          <div class="col">
            <div class="row">
              <div id="time-difference-7-5" class="timestamp"></div>
            </div>
            <div class="row"></div>
            <div class="row">
              <div id="time-difference-7-6" class="timestamp"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
      } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

      // Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyD0wYYVfaBvSaktiXMQ0tCc2vWdxmAS2k8",
        authDomain: "badminton-h.firebaseapp.com",
        databaseURL:
          "https://badminton-h-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "badminton-h",
        storageBucket: "badminton-h.appspot.com",
        messagingSenderId: "370589389980",
        appId: "1:370589389980:web:de228c53e880e2f2510959",
        measurementId: "G-KKR7HHJ099",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // Reference to the timestamp in the database
      const timestampRef = ref(database, "ir_test/");
     
      let timestamp1;
      let timestamp2;
      let timestamp3;
      let timestamp4;
      let timestamp5;
      let timestamp6;
      let timestamp7;

      // Listen for changes in the timestamp value
      onValue(timestampRef, (snapshot) => {
        timestamp1 = snapshot.val().unit1;
        timestamp2 = snapshot.val().unit2;
        timestamp3 = snapshot.val().unit3;
        timestamp4 = snapshot.val().unit4;
        timestamp5 = snapshot.val().unit5;
        timestamp6 = snapshot.val().unit6;
        timestamp7 = snapshot.val().unit7;

        // document.getElementById("timestamp-display-2").innerHTML =
        //   "Timestamp Unit-1: " + timestamp1;

          if (timestamp1 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew1 = new Date(parseInt(timestamp1, 10));
        const timestampNew7 = new Date(parseInt(timestamp2, 10));

        if (!isNaN(timestamp1) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew1) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-1-7").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-1-7").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-1-7").innerHTML =
          "Missing timestamps";
      }



  //  ......................

  
  if (timestamp2 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew2 = new Date(parseInt(timestamp2, 10));
        const timestampNew7 = new Date(parseInt(timestamp7, 10));

        if (!isNaN(timestamp2) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew2) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-7-2").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-7-2").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-7-2").innerHTML =
          "Missing timestamps";
      }


      // ....................

      if (timestamp3 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew3 = new Date(parseInt(timestamp3, 10));
        const timestampNew7 = new Date(parseInt(timestamp7, 10));

        if (!isNaN(timestamp3) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew3) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-7-3").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-7-3").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-7-3").innerHTML =
          "Missing timestamps";
      }

// ..........................

if (timestamp4 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew4 = new Date(parseInt(timestamp4, 10));
        const timestampNew7 = new Date(parseInt(timestamp7, 10));

        if (!isNaN(timestamp4) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew4) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-7-4").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-7-4").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-7-4").innerHTML =
          "Missing timestamps";
      }

      //  ......................

  
  if (timestamp5 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew5 = new Date(parseInt(timestamp5, 10));
        const timestampNew7 = new Date(parseInt(timestamp7, 10));

        if (!isNaN(timestamp5) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew5) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-7-5").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-7-5").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-7-5").innerHTML =
          "Missing timestamps";
      }


      //  ......................

  
  if (timestamp6 && timestamp7) {
        // Convert timestamps to milliseconds and ensure they are valid dates
        const timestampNew6 = new Date(parseInt(timestamp6, 10));
        const timestampNew7 = new Date(parseInt(timestamp7, 10));

        if (!isNaN(timestamp6) && !isNaN(timestamp7)) {
          // Calculate the time difference in seconds
          const timeDifferenceInSeconds = (timestampNew7 - timestampNew6) / 1000;

          // Display the time difference as a number in seconds
          document.getElementById("time-difference-7-6").innerHTML =
            "Time Difference: " + timeDifferenceInSeconds + " seconds";
        } else {
          document.getElementById("time-difference-7-6").innerHTML =
            "Invalid timestamps";
        }
      } else {
        document.getElementById("time-difference-7-6").innerHTML =
          "Missing timestamps";
      }

      });

    </script>
  </body>
</html>
